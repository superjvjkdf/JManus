import{d as E,o as P,D as x,l as S,b as y,K as V,g as h,T as _,p as M,a as T,f as k,e as o,t as b,n as N,i as C,R as $,j as B,r as v,X as A,B as D}from"./index-DDyEo--X.js";import{I,_ as K}from"./_plugin-vue_export-helper-CteboPq4.js";import{P as L}from"./plan-template-with-tool-api-service-BZqjfE8u.js";const F={class:"modal-header"},O={class:"header-content"},R=["title"],j={class:"modal-content"},q={class:"modal-footer"},z=E({name:"ModalDialog",__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},statusIcon:{type:String,default:""},statusIconClass:{type:String,default:""},statusIconTitle:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(s,{emit:n}){const l=s,a=n,r=t=>{t.target===t.currentTarget&&(t.stopPropagation(),t.preventDefault())},f=t=>{if(!t||!(t instanceof HTMLElement))return!1;const e=t.tagName.toLowerCase(),i=t.isContentEditable;return e==="input"||e==="textarea"||e==="select"||i},d=t=>{l.modelValue&&(f(t.target)||(t.key==="Escape"?a("update:modelValue",!1):t.key==="Enter"&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&a("confirm")))};return P(()=>{document.addEventListener("keydown",d)}),x(()=>{document.removeEventListener("keydown",d)}),(t,e)=>(y(),S(V,{to:"body"},[h(_,{name:"modal"},{default:M(()=>[s.modelValue?(y(),T("div",{key:0,class:"modal-overlay",onClick:r},[o("div",{class:"modal-container",onClick:e[3]||(e[3]=B(()=>{},["stop"]))},[o("div",F,[o("div",O,[o("h3",null,b(s.title),1),s.statusIcon?(y(),T("div",{key:0,class:N(["status-icon",s.statusIconClass]),title:s.statusIconTitle},[h(C(I),{icon:s.statusIcon,width:"16"},null,8,["icon"])],10,R)):k("",!0)]),o("button",{class:"close-btn",onClick:e[0]||(e[0]=i=>t.$emit("update:modelValue",!1))},[h(C(I),{icon:"carbon:close"})])]),o("div",j,[$(t.$slots,"default",{},void 0,!0)]),o("div",q,[$(t.$slots,"footer",{},()=>[o("button",{class:"cancel-btn",onClick:e[1]||(e[1]=i=>t.$emit("update:modelValue",!1))},b(t.$t("common.cancel")),1),o("button",{class:"confirm-btn",onClick:e[2]||(e[2]=i=>t.$emit("confirm"))},b(t.$t("common.confirm")),1)],!0)])])])):k("",!0)]),_:3})]))}}),Z=K(z,[["__scopeId","data-v-8607d649"]]),H={class:"toast-header"},J={class:"toast-title"},U={class:"toast-content"},X=E({name:"ToastNotification",__name:"Toast",setup(s,{expose:n}){const l=v(!1),a=v(""),r=v("success"),f=v("carbon:checkmark"),d=v(3e3),t=(i,c="success",u=3e3)=>{a.value=i,r.value=c,f.value=c==="success"?"carbon:checkmark":"carbon:error",d.value=u,l.value=!0},e=()=>{l.value=!1};return n({show:t}),(i,c)=>(y(),S(V,{to:"body"},[h(_,{name:"modal"},{default:M(()=>[l.value?(y(),T("div",{key:0,class:"toast-overlay",onClick:e},[o("div",{class:N(["toast-modal",`toast--${r.value}`]),onClick:c[0]||(c[0]=B(()=>{},["stop"]))},[o("div",H,[h(C(I),{icon:f.value,class:"toast-icon"},null,8,["icon"]),o("span",J,b(r.value==="success"?"Success":"Error"),1)]),o("div",U,[o("span",null,b(a.value),1)]),o("div",{class:"toast-actions"},[o("button",{class:"toast-btn toast-btn--primary",onClick:e},"Confirm")])],2)])):k("",!0)]),_:1})]))}}),G=K(X,[["__scopeId","data-v-e0db5b02"]]);let g=null;const tt=()=>{if(!g){const s=A(G),n=document.createElement("div");document.body.appendChild(n),g=s.mount(n)}return{success:(s,n)=>{g?.show(s,"success",n)},error:(s,n)=>{g?.show(s,"error",n)}}};function et(){return{handleImport:async(n,l={})=>{const a=n.target,r=a.files?.[0];if(!r)return;const{showConfirm:f=!1,confirmMessage:d,onSuccess:t,onError:e,onReload:i,onSingleTemplateImported:c}=l;try{const u=await r.text(),m=JSON.parse(u);if(!Array.isArray(m)){const p="Invalid format: expected an array of plan templates";if(a.value="",e)e(p);else throw new Error(p);return}if(f&&d&&!confirm(d)){a.value="";return}const w=await L.importPlanTemplates(m);if(w.success){if(t&&await t(w,m),i&&await i(),c&&w.successCount===1&&m.length===1){const p=m[0];p.planTemplateId&&await c(p)}}else e?e("Import failed"):console.error("Import failed")}catch(u){console.error("Failed to import plan templates:",u);const m=u instanceof Error?u.message:"Failed to import plan templates";e&&e(m)}finally{a.value=""}}}}function st(){const s=D({show:!1,text:"",type:"success"});return{toast:s,showToast:(l,a="success")=>{console.log(`Showing toast: ${l}, Type: ${a}`),s.text=l,s.type=a,s.show=!0;const r=a==="error"?5e3:3e3;console.log(`Toast will be automatically hidden after ${r}ms`),setTimeout(()=>{s.show=!1,console.log("Toast hidden")},r)}}}export{Z as M,et as a,st as b,tt as u};
//# sourceMappingURL=useToast-D_8pUq38.js.map
